---
title: Basic Mouse Input
tags:
 - tutorial
 - input
 - beginner
 - scripting
 - mouse
level: beginner
index: 2
---

# Basic Mouse Input

<div id="canvas-container" class="pc-draft-container"></div>
<script>
    var container = document.getElementById("canvas-container");
    pc.config = {};
    pc.config['api_url'] = "http://platform.playcanvas.com/api";
    pc.config['corazon'] = {
        endpoint: "http://login.playcanvas.com/oauth2/auth",
        redirect: "http://login.playcanvas.com/oauth2/end",
        origin: "http://login.playcanvas.com",
        client: "http://platform.playcanvas.com"
    };
    pc.config['bootstrap'] = {
        entity: "60cc4049-d6ce-445d-b0d2-20f97cb0d9a3",
        username: "dave",
        depot: "tutorials",
        container: container,
        resize: false,
        width: 710,
        height: 399
    };
</script>
<script src="http://platform.playcanvas.com/script/common/corazon.js"></script>
<script src="http://platform.playcanvas.com/script/bootstrap/bootstrap.js"></script>

Mouse handling in the PlayCanvas Engine is provided by the `pc.input.Mouse` object. The Mouse object provides a simple interface for detecting when the
mouse is moved or when mouse buttons are pressed. It also removes some of the cross-browser inconsistancies with handling mouse co-ordinates.

Take a look at the input_mouse Pack in the [tutorials depot][depot]. Here is the code from mouse.js:

~~~js~~~
pc.script.create("mouse", function (context) {
    var MouseHandler = function (entity) {
        this.entity = entity;

        // Disabling the context menu stops the browser disabling a menu when 
        // you right-click the page
        context.mouse.disableContextMenu();
    };
    
    MouseHandler.prototype.update = function (dt) {
        
        // Use the bind() method to attach event handlers. 
        // The mouse object supports events on move and drag, button down and 
        // up, and scroll wheel.
        context.mouse.bind(pc.input.EVENT_MOUSE_MOVE, this.onMouseMove.bind(this));
        context.mouse.bind(pc.input.EVENT_MOUSE_DOWN, this.onMouseDown.bind(this));
    };
    
    MouseHandler.prototype.onMouseMove = function (event) {
        // Here we are getting the resolution of the canvas from the graphics 
        // Device object.
        var device = pc.gfx.Device.getCurrent();
        var target = device.getRenderTarget();
        var width = target.getViewport().width;
        var height = target.getViewport().height;
        
        // Using the current position of the mouse from the event we calculate
        //  the new position of the cube
        var x = -5 ** (event.x - (width/2)) / width;
        var y = 5 ** (event.y - (height/2)) / height;
        
        // Finally update the cube's position.
        var transform = this.entity.getLocalTransform();
        transform[12] = x;
        transform[13] = y;
        this.entity.setLocalTransform(transform);
    };
    
    MouseHandler.prototype.onMouseDown = function (event) {
        // If the left mouse button is pressed, change the cube color to red
        if (event.button == pc.input.MOUSE_BUTTON_LEFT) {
            context.systems.primitive.set(this.entity, "color", 0xff0000);
        }

        // If the left mouse button is pressed, change the cube color to green
        if (event.button == pc.input.MOUSE_BUTTON_MIDDLE) {
            context.systems.primitive.set(this.entity, "color", 0x00ff00);
        }

        // If the left mouse button is pressed, change the cube color to blue
        if (event.button == pc.input.MOUSE_BUTTON_RIGHT) {
            context.systems.primitive.set(this.entity, "color", 0x0000ff);
        }
    };
    
    return MouseHandler;
});
~~~~~~~~~~

### `pc.input.Mouse`

Mouse control is managed by the `pc.input.Mouse` object. The [framework][framework] provides an instance of this on the [application context][context] which is available
to all script objects as 

~~~javascript~~~
context.mouse
~~~~~~~~~

### Disabling the right-click menu
In the constructor for our script object we disable the right-click menu to stop it popping up when we click the right mouse button.

~~~javascript~~~
context.mouse.disableContextMenu();
~~~~~~~~~

### Binding to events

The `pc.input.Mouse` object allows you to bind different events corresponding to mouse actions, in the tutorial we are binding the method `onMouseMove` to the move event and `onMouseDown`
to the button down event. 

Notice we use `this.onMouseDown.bind(this);` rather than `this.onMouseDown` as the callback. We're using [`Function.bind`][bind] in order to make sure the value
of `this` is correct when the event callback is fired.   

~~~javascript~~~
context.mouse.bind(pc.input.EVENT_MOUSE_MOVE, this.onMouseMove.bind(this));
context.mouse.bind(pc.input.EVENT_MOUSE_DOWN, this.onMouseDown.bind(this));
~~~~~~~~~

Events available on `pc.input.Mouse` are:

* `pc.input.EVENT_MOUSE_UP` - fires when a mouse button is pressed
* `pc.input.EVENT_MOUSE_DOWN` - fires when a mouse button is released
* `pc.input.EVENT_MOUSE_MOVE` - fires when the mouse is moved
* `pc.input.EVENT_MOUSE_WHEEL` - fires when the mouse wheel is rotated.

Mouse input in browsers is usually implemented by listening to [DOM][dom] events on elements in your page's DOM. The problem is that different browsers implement the events slightly
differently and supply different values. In order to simplify the code you write the PlayCanvas Engine allows you to bind your event handlers to the PlayCanvas mouse handler instead of
directly the DOM Element. The engine supplies a `pc.input.MouseEvent` object when the event fires which is consistant across all browsers. If you do need the original DOM event it is available
as the `event` property in `pc.input.MouseEvent`.

### Moving the mouse

The first event handler is `onMouseMove`, this is fired whenever the mouse moves. For a `EVENT_MOUSE_MOVE` event the `MouseEvent` object will have the current position of the mouse `x`, and `y`
and also the change in position since the last event in `deltaX` and `deltaY`. In our tutorial we're using the current position of the mouse and moving the cube away from the cursor position.

### Mouse buttons

The second event handler is `onMouseDown`, this is fired whenever one of the three mouse buttons is clicked. In the `EVENT_MOUSE_DOWN` and `EVENT_MOUSE_UP` events the `MouseEvent` object will
have a `button` property which contains the button that has been pressed/released. It can be one of the following values:

* `pc.input.MOUSE_BUTTON_NONE`
* `pc.input.MOUSE_BUTTON_LEFT`
* `pc.input.MOUSE_BUTTON_MIDDLE`
* `pc.input.MOUSE_BUTTON_RIGHT`

In our tutorial we're changing the color of the cube depending on which mouse button was pressed.

### Try it out

Try the tutorial in full screen [here][tutorial] or at the top of the page. Move the mouse to move the cube, and click the left, middle and right mouse button to change the color of the cube. 

[depot]: http://platform.playcanvas.com/dave/tutorials
[framework]: /glossary.html#framework
[context]: /glossary.html#context
[dom]: /glossary.html#dom
[bind]: https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind
[tutorial]: http://platform.playcanvas.com/dave/tutorials/designer/bootstrap?e=60cc4049-d6ce-445d-b0d2-20f97cb0d9a3&u=dave&p=tutorials
