---
title: –ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∏–≥—Ä—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å Colyseus
layout: tutorial-page.hbs
tags: –º–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π, —Å–µ—Ç–µ–≤–æ–π
thumb: https://avatars.githubusercontent.com/u/28384334?s=300&v=4
---

<iframe loading="lazy" src="https://playcanv.as/p/1QoAsx7r/" title="Real-time Multiplayer with Colyseus"></iframe>

> *–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã, —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É. –ò —â–µ–ª–∫–Ω–∏—Ç–µ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –ø–æ–ª–∞, —á—Ç–æ–±—ã –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –æ–±—ä–µ–∫—Ç.*

## –í —ç—Ç–æ–º —É—Ä–æ–∫–µ –≤—ã —É–∑–Ω–∞–µ—Ç–µ:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Colyseus
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –∫–ª–∏–µ–Ω—Ç–æ–º
- –û–±–º–µ–Ω —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º
- –ú–∞—Ç—á–º–µ–π–∫–∏–Ω–≥: –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—Ç—å—Å—è –∏ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∏–≥—Ä—ã

## –ú–∞—Ç–µ—Ä–∏–∞–ª—ã

- [–ü—Ä–æ–µ–∫—Ç PlayCanvas (—Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –∫–ª–∏–µ–Ω—Ç–∞)](https://playcanvas.com/project/859259/overview/colyseus-demo)
- [–ü—Ä–æ–µ–∫—Ç Colyseus TypeScript (—Å–æ —Å—Ç–æ—Ä–æ–Ω—ã —Å–µ—Ä–≤–µ—Ä–∞)](https://github.com/colyseus/tutorial-playcanvas-server)

# –ü—Ä–µ–∂–¥–µ —á–µ–º –Ω–∞—á–∞—Ç—å

## –û–∂–∏–¥–∞–µ–º—ã–µ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞–Ω–∏—è

- –ë–∞–∑–æ–≤—ã–µ –∑–Ω–∞–Ω–∏—è PlayCanvas ([–°–º. –†–µ—Å—É—Ä—Å—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ PlayCanvas](https://developer.playcanvas.com/))
- –ë–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ JavaScript/TypeScript ([–°–º. –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ TypeScript](https://www.typescriptlang.org/docs/handbook/intro.html))
- –ë–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ Node.js ([–°–º. –í–≤–µ–¥–µ–Ω–∏–µ –≤ Node.js](https://nodejs.dev/en/learn/))

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–º—É –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—é

- [Node.js LTS](https://nodejs.org/en/download/)
- [Visual Studio Code](https://code.visualstudio.com/download)

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞

–ú—ã —Å–æ–∑–¥–∞–¥–∏–º –±–∞–∑–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä, —Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ –≤–∞—à–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏–≥—Ä–æ–∫–æ–≤. –ò–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.

–ß—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä Colyseus, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ:

```
npm init colyseus-app ./playcanvas-demo-server
```

–î–∞–≤–∞–π—Ç–µ —É–±–µ–¥–∏–º—Å—è, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä –ª–æ–∫–∞–ª—å–Ω–æ, –≤—ã–ø–æ–ª–Ω–∏–≤ –∫–æ–º–∞–Ω–¥—É `npm start`:

```
cd playcanvas-demo-server
npm start
```

–ï—Å–ª–∏ –≤—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å —Ç–∞–∫ –≤ –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ:

```
Issue Tracker
Tutorial Thumbnail
Entity
Material Asset
Material Inspector
Shader Editor
Node Inspector
Texture Inspector
Graph Inspector
Asset
Graph Editor
Assets
```

```
> my-app@1.0.0 start
> ts-node-dev --respawn --transpile-only src/index.ts

‚úÖ development.env –∑–∞–≥—Ä—É–∂–µ–Ω.
‚úÖ Express –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
üèü –í–∞—à–µ Colyseus –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚öîÔ∏è –°–ª—É—à–∞–µ—Ç –Ω–∞ ws://localhost:2567
```

# –í–∫–ª—é—á–µ–Ω–∏–µ Colyseus JavaScript SDK

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Colyseus JavaScript SDK –≤ PlayCanvas.

–ú—ã –º–æ–∂–µ–º —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —á–µ—Ä–µ–∑ "–≤–Ω–µ—à–Ω–∏–π —Å–∫—Ä–∏–ø—Ç" –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ PlayCanvas.

–û—Ç–∫—Ä–æ–π—Ç–µ **"–ú–µ–Ω—é" ‚Üí "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"**:

![settings](/images/tutorials/multiplayer-colyseus/settings.png)

–í –ø–∞–Ω–µ–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Ä–∞–∑–≤–µ—Ä–Ω–∏—Ç–µ **"–í–Ω–µ—à–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã"** –∏ —É–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ **"URL-–∞–¥—Ä–µ—Å–æ–≤"**.

![CDN](/images/tutorials/multiplayer-colyseus/ext_script.png)

–í –Ω–æ–≤–æ–º –ø–æ–ª–µ **"URL"** –¥–∞–≤–∞–π—Ç–µ –≤–∫–ª—é—á–∏–º Colyseus JavaScript SDK —Å CDN:

```
https://unpkg.com/colyseus.js@^0.15.0-preview.2/dist/colyseus.js
```

–≠—Ç–æ —Å–¥–µ–ª–∞–µ—Ç [JavaScript SDK](https://docs.colyseus.io/colyseus/getting-started/javascript-client/) `Colyseus` –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è –Ω–∞—à–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ PlayCanvas.

# –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º

–¢–µ–ø–µ—Ä—å, –∏–∑ –Ω–æ–≤–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è PlayCanvas, –¥–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä `Colyseus.Client`. ([—Å–º. "–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤"](https://developer.playcanvas.com/en/user-manual/scripting/creating-new/))

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —ç—Ç–æ—Ç —Å—Ü–µ–Ω–∞—Ä–∏–π –∫ –Ω–æ–≤–æ–π –ø—É—Å—Ç–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º "NetworkManager".

```javascript
var NetworkManager = pc.createScript('networkManager');

NetworkManager.prototype.initialize = function () {
  //
  // —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ SDK
  // (–Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è)
  //
  this.app.colyseus = new Colyseus.Client("ws://localhost:2567");

  //
  // –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã "my_room"
  // (—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º)
  //
  this.room = await this.app.colyseus.joinOrCreate("my_room");
}
```

> –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ –∑–¥–µ—Å—å –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É `ws://localhost:2567`. –í–∞–º –Ω—É–∂–Ω–æ [—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å —Å–≤–æ–π —Å–µ—Ä–≤–µ—Ä](https://docs.colyseus.io/arena/getting-started/create-application/) –≤ –ø—É–±–ª–∏—á–Ω–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, —á—Ç–æ–±—ã –∏–≥—Ä–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –æ–Ω–ª–∞–π–Ω. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [Glitch](https://glitch.com/edit/#!/tutorial-playcanvas-server) –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

–ö–æ–≥–¥–∞ –≤—ã —Ç–µ–ø–µ—Ä—å **"–ó–∞–ø—É—Å—Ç–∏—Ç–µ"** —Å–≤–æ–π –ø—Ä–æ–µ–∫—Ç PlayCanvas, –≤–∞—à –∫–ª–∏–µ–Ω—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º, –∏ —Å–µ—Ä–≤–µ—Ä —Å–æ–∑–¥–∞—Å—Ç –∫–æ–º–Ω–∞—Ç—É `my_room` –ø–æ –∑–∞–ø—Ä–æ—Å—É –¥–ª—è –≤–∞—Å.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ `my_room` —è–≤–ª—è–µ—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –∫–æ–º–Ω–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º Colyseus. –í—ã –º–æ–∂–µ—Ç–µ –∏ –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω–∏—Ç—å —ç—Ç–æ—Ç –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤ —Ñ–∞–π–ª–µ `arena.config.ts`.

–í—ã —É–≤–∏–¥–∏—Ç–µ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∂—É—Ä–Ω–∞–ª–∞—Ö –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —É—Å–ø–µ—à–Ω–æ–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ!

```
19U8WkmoK –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è!
```

# –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –∏ —Å—Ö–µ–º–∞

–í Colyseus –º—ã –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `Schema`.

> `Schema` - —ç—Ç–æ –æ—Å–æ–±—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –æ—Ç Colyseus, –∫–æ—Ç–æ—Ä—ã–π —Å–ø–æ—Å–æ–±–µ–Ω –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è/–º—É—Ç–∞—Ü–∏–∏ _–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω–æ_. –ü—Ä–æ—Ü–µ—Å—Å –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ –∏ –µ–≥–æ SDK.

–¶–∏–∫–ª —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

1. –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (–º—É—Ç–∞—Ü–∏–∏) —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ ‚Üí –∫–ª–∏–µ–Ω—Ç—ã
2. –ö–ª–∏–µ–Ω—Ç—ã, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—è –æ–±—Ä–∞—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã –∫ —Å–≤–æ–∏–º –ª–æ–∫–∞–ª—å–Ω—ã–º _—Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è_ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º `Schema`, –º–æ–≥—É—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –º—É—Ç–∞—Ü–∏—è–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–∏—Ö.
3. –ö–ª–∏–µ–Ω—Ç—ã –º–æ–≥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä - –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å —Å –Ω–∏–º–∏ - –∏ –º–æ–≥—É—Ç –∏–∑–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —à–∞–≥—É **1.**)

---

–î–∞–≤–∞–π—Ç–µ –≤–µ—Ä–Ω–µ–º—Å—è –∫ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

–ù–∞–º –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ `Player`, –∏ –∫–∞–∂–¥—ã–π `Player` –±—É–¥–µ—Ç –∏–º–µ—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã `x`, `y` –∏ `z`:

```typescript
// MyRoomState.ts
import { MapSchema, Schema, type } from "@colyseus/schema";

export class Player extends Schema {
    @type("number") x: number;
    @type("number") y: number;
    @type("number") z: number;
}

export class MyRoomState extends Schema {
    @type({ map: Player }) players = new MapSchema<Player>();
}
```

> –£–∑–Ω–∞–π—Ç–µ –±–æ–ª—å—à–µ –æ [—Å—Ç—Ä—É–∫—Ç—É—Ä–∞—Ö —Å—Ö–µ–º—ã](https://docs.colyseus.io/colyseus/state/schema/).

–¢–µ–ø–µ—Ä—å, –ø—Ä–æ–¥–æ–ª–∂–∞—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, –¥–∞–≤–∞–π—Ç–µ –∏–∑–º–µ–Ω–∏–º –Ω–∞—à –º–µ—Ç–æ–¥ `onJoin()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `Player` –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∫–æ–º–Ω–∞—Ç–æ–π.

```typescript
// MyRoom.ts
// ...
    onJoin(client: Client, options: any) {
        console.log(client.sessionId, "–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è!");

        // —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä Player
        const player = new Player();

        // —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å Player –≤ —Å–ª—É—á–∞–π–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏
        const FLOOR_SIZE = 4;
        player.x = -(FLOOR_SIZE/2) + (Math.random() * FLOOR_SIZE);
        player.y = 1.031;
        player.z = -(FLOOR_SIZE/2) + (Math.random() * FLOOR_SIZE);

        // —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –∏–≥—Ä–æ–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–µ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –µ–≥–æ sessionId
        // (client.sessionId —É–Ω–∏–∫–∞–ª–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è!)
        this.state.players.set(client.sessionId, player);
    }
// ...
}
```

–¢–∞–∫–∂–µ, –∫–æ–≥–¥–∞ –∫–ª–∏–µ–Ω—Ç –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è, –¥–∞–≤–∞–π—Ç–µ —É–¥–∞–ª–∏–º –∏–≥—Ä–æ–∫–∞ –∏–∑ –∫–∞—Ä—Ç—ã –∏–≥—Ä–æ–∫–æ–≤:

```typescript
// MyRoom.ts
// ...
    onLeave(client: Client, consented: boolean) {
        console.log(client.sessionId, "–ø–æ–∫–∏–Ω—É–ª!");

        this.state.players.delete(client.sessionId);
    }
// ...
```

–ú—É—Ç–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Å–¥–µ–ª–∞–ª–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞, **–º–æ–∂–Ω–æ –Ω–∞–±–ª—é–¥–∞—Ç—å** –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞, –∏ —ç—Ç–æ —Ç–æ, —á—Ç–æ –º—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è —Å–¥–µ–ª–∞—Ç—å –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ü–µ–Ω—ã –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

–î–ª—è —ç—Ç–æ–π –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –¥–≤–∞ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞ –Ω–∞—à–µ–π —Å—Ü–µ–Ω–µ:

- –ü–ª–æ—Å–∫–æ—Å—Ç—å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª–∞
- –ö–∞–ø—Å—É–ª–∞ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–æ–≤, –∫–æ—Ç–æ—Ä—É—é –º—ã –±—É–¥–µ–º –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞, –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è—é—â–µ–≥–æ—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ.

## –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–æ—Å–∫–æ—Å—Ç–∏

–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –ø–ª–æ—Å–∫–æ—Å—Ç—å —Å –º–∞—Å—à—Ç–∞–±–æ–º `8`.

![–ü–ª–æ—Å–∫–æ—Å—Ç—å](/images/tutorials/multiplayer-colyseus/plane.jpg)

## –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞

–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º –∫–∞–ø—Å—É–ª—É –∏–≥—Ä–æ–∫–∞ —Å –º–∞—Å—à—Ç–∞–±–æ–º `1`.

–ù–µ –∑–∞–±—É–¥—å—Ç–µ —Å–Ω—è—Ç—å —Ñ–ª–∞–∂–æ–∫ —Å —Å–≤–æ–π—Å—Ç–≤–∞ `"Enabled"`. –£ –Ω–∞—Å –Ω–µ –±—É–¥–µ—Ç –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –∏–≥—Ä–æ–∫–∞, –ø–æ–∫–∞ —É –Ω–∞—Å –Ω–µ –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å —Å–µ—Ä–≤–µ—Ä–æ–º.

![–ò–≥—Ä–æ–∫](/images/tutorials/multiplayer-colyseus/player.png)

# –ü—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –∫–æ–º–Ω–∞—Ç–æ–π –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞ –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

–ö–∞–∫ —É–∫–∞–∑–∞–Ω–æ –≤ —Ä–∞–∑–¥–µ–ª–µ [–°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã –∏ —Å—Ö–µ–º–∞](#room-state-and-schema), –∫–æ–≥–¥–∞ —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ - –º–µ—Ç–æ–¥ `onJoin()` —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∏–≥—Ä–æ–∫–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

–¢–µ–ø–µ—Ä—å –º—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è –ø—Ä–æ—Å–ª—É—à–∞—Ç—å —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞:

```typescript
// ...
this.room.state.players.onAdd((player, sessionId) => {
  //
  // –ò–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è!
  //
  console.log("–ò–≥—Ä–æ–∫ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è! –ò—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å–µ–∞–Ω—Å–∞", sessionId);
});
// ...
```

–ü—Ä–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–∏ —Å—Ü–µ–Ω—ã –≤—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞ –∫ –∫–æ–º–Ω–∞—Ç–µ.

–î–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –Ω–∞–º –Ω—É–∂–Ω–æ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç "Player" –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Ö `sessionId`, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–∏–º–∏ –ø–æ–∑–∂–µ:

```typescript
// ...

// –∑–¥–µ—Å—å –º—ã –Ω–∞–∑–Ω–∞—á–∏–º –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ
// –ø–æ –∏—Ö `sessionId`
this.playerEntities = {};

// —Å–ª—É—à–∞–µ–º –Ω–æ–≤—ã—Ö –∏–≥—Ä–æ–∫–æ–≤
this.room.state.players.onAdd((player, sessionId) => {
  // –Ω–∞—Ö–æ–¥–∏–º –±–∞–∑–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ (–Ω–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ)
  const playerEntityToClone = this.app.root.findByName("Player");

  // –∫–ª–æ–Ω–∏—Ä—É–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –µ–≥–æ!
  const entity = playerEntityToClone.clone();
  entity.enabled = true;

  // —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø–æ–∑–∏—Ü–∏—é –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–∞
  entity.setPosition(player.x, player.y, player.z);

  // –¥–æ–±–∞–≤–ª—è–µ–º –∫–ª–æ–Ω –≤ —Å—Ü–µ–Ω—É
  playerEntityToClone.parent.addChild(entity);

  // –Ω–∞–∑–Ω–∞—á–∞–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ –∏—Ö `sessionId`
  this.playerEntities[sessionId] = entity;
});
// ...
```

## "–¢–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫"

–í—ã –º–æ–∂–µ—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –æ–±—ä–µ–∫—Ç —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞, –ø—Ä–æ–≤–µ—Ä–∏–≤ `sessionId` –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–º—É `room.sessionId`:

```typescript
// ...
this.room.state.players.onAdd((player, sessionId) => {
  // ...
  if (room.sessionId === sessionId) {
    this.currentPlayerEntity = playerEntities[sessionId];
  }
  // ...
});
```

## –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã—Ö –∏–≥—Ä–æ–∫–æ–≤

–ö–æ–≥–¥–∞ –∏–≥—Ä–æ–∫ —É–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–ø–æ—Å–ª–µ `onLeave()` –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞), –Ω–∞–º –Ω—É–∂–Ω–æ —Ç–∞–∫–∂–µ —É–¥–∞–ª–∏—Ç—å –∏—Ö –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ.

```javascript
// ...
this.room.state.players.onRemove((player, sessionId) => {
  // —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å —Å—É—â–Ω–æ—Å—Ç—å
  this.playerEntities[sessionId].destroy();

  // –æ—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
  delete this.playerEntities[sessionId];
});
// ...
```

# –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤

## –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–æ–≤–æ–π –ø–æ–∑–∏—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ú—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ "mouse down"; –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [ray cast](https://developer.playcanvas.com/en/user-manual/physics/ray-casting/) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ `Vec3`, –∫ –∫–æ—Ç–æ—Ä–æ–π –¥–æ–ª–∂–µ–Ω –¥–≤–∏–≥–∞—Ç—å—Å—è –∏–≥—Ä–æ–∫, –∞ –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –µ–µ –≤ –≤–∏–¥–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä.

```typescript
// ...
this.app.mouse.on(pc.EVENT_MOUSEDOWN, (event) => {
  // –°–æ–∑–¥–∞–µ–º "–æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—é—â—É—é —Ä–∞–º–∫—É" –¥–ª—è –ø–æ–ª–∞
  const boundingBox = new pc.BoundingBox(new pc.Vec3(0, 0, 0), new pc.Vec3(4, 0.001, 4));;

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ª—É—á –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª—É—á–∞
  // –∏–∑ –ø–æ–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ
  const ray = new pc.Ray();
  const targetPosition = new pc.Vec3();

  const cameraEntity = this.app.root.findByName("Camera");
  cameraEntity.camera.screenToWorld(event.x, event.y, cameraEntity.camera.farClip, ray.direction);
  ray.origin.copy(cameraEntity.getPosition());
  ray.direction.sub(ray.origin).normalize();

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª—É—á –Ω–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ —Å –∑–µ–º–ª–µ–π
  const result = boundingBox.intersectsRay(ray, targetPosition);

  if (result) {
    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –≤—ã—Å–æ—Ç—É –ø–æ–∑–∏—Ü–∏–∏
    targetPosition.y = 1.031;

    //
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–≤—É—é —Ü–µ–ª–µ–≤—É—é –ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
    //
    this.room.send("updatePosition", {
        x: targetPosition.x,
        y: targetPosition.y,
        z: targetPosition.z,
    });
  }
});
```

## –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞

–ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ `"updatePosition"` –ø–æ–ª—É—á–µ–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –º—ã –±—É–¥–µ–º –∏–∑–º–µ–Ω—è—Ç—å –∏–≥—Ä–æ–∫–∞, –æ—Ç–ø—Ä–∞–≤–∏–≤—à–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–µ, —á–µ—Ä–µ–∑ –µ–≥–æ `sessionId`.

```typescript
// MyRoom.ts
// ...
  onCreate(options: any) {
    this.setState(new MyRoomState());

    this.onMessage("updatePosition", (client, data) => {
      const player = this.state.players.get(client.sessionId);
      player.x = data.x;
      player.y = data.y;
      player.z = data.z;
    });
  }
// ...
```

```typescript
// MyRoom.ts
// ...
  onCreate(options: any) {
    this.setState(new MyRoomState());

    this.onMessage("–æ–±–Ω–æ–≤–∏—Ç—å–ü–æ–∑–∏—Ü–∏—é", (client, data) => {
      const player = this.state.players.get(client.sessionId);
      player.x = data.x;
      player.y = data.y;
      player.z = data.z;
    });
  }
// ...
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞

–ò–º–µ—è –º—É—Ç–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –º—ã –º–æ–∂–µ–º –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å –µ–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `player.onChange()` –∏–ª–∏ `player.listen()`.

- `player.onChange()` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å—Ö–µ–º—ã**
- `player.listen(prop)` —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç **–ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞–∂–¥–æ–≥–æ —Å–≤–æ–π—Å—Ç–≤–∞**

–ú—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.onChange()`, —Ç–∞–∫ –∫–∞–∫ –Ω–∞–º –Ω—É–∂–Ω—ã –≤—Å–µ –Ω–æ–≤—ã–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —Å—Ä–∞–∑—É, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∏–∑–º–µ–Ω–∏–ª–∞—Å—å –ª–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö.

```typescript
// ...
this.room.state.players.onAdd((player, sessionId) => {
  // ...
  player.onChange(() => {
    this.playerEntities[sessionId].setPosition(player.x, player.y, player.z);
  });

  // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞, –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤:
  // player.listen("x", (newX, prevX) => console.log(newX, prevX));
  // player.listen("y", (newY, prevY) => console.log(newY, prevY));
  // player.listen("z", (newZ, prevZ) => console.log(newZ, prevZ));
});
```

> –ß–∏—Ç–∞–π—Ç–µ [–±–æ–ª—å—à–µ –æ —Å—Ö–µ–º–∞—Ö –æ–±—Ä–∞—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤](https://docs.colyseus.io/colyseus/state/schema/#client-side)

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–Ω–∞—Ç –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

Colyseus –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–∞–Ω–µ–ª—å—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –∫–æ—Ç–æ—Ä–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–æ–π –≤–æ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–∞—à–µ–π –∏–≥—Ä—ã.

–ß—Ç–æ–±—ã –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∞ –Ω–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:2567/colyseus`.

![monitor](/images/tutorials/multiplayer-colyseus/monitor.png)

–í—ã –º–æ–∂–µ—Ç–µ –≤–∏–¥–µ—Ç—å –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ –≤—Å–µ–º–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã–º–∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏ –∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏ —á–µ—Ä–µ–∑ —ç—Ç—É –ø–∞–Ω–µ–ª—å.

> –°–º–æ—Ç—Ä–∏—Ç–µ [–±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–∞–Ω–µ–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∞](https://docs.colyseus.io/colyseus/tools/monitor/).


# –ë–æ–ª—å—à–µ

–ú—ã –Ω–∞–¥–µ–µ–º—Å—è, —á—Ç–æ —ç—Ç–æ—Ç —É—á–µ–±–Ω–∏–∫ –±—ã–ª –ø–æ–ª–µ–∑–Ω—ã–º –¥–ª—è –≤–∞—Å, –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å –±–æ–ª—å—à–µ –æ Colyseus, –æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Colyseus](https://docs.colyseus.io/) –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç–µ—Å—å –∫ [—Å–æ–æ–±—â–µ—Å—Ç–≤—É Colyseus –≤ Discord](https://discord.gg/RY8rRS7).
