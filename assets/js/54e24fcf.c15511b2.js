"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[4831],{9642:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>r,toc:()=>l});var o=s(85893),n=s(11151);const a={title:"Audio Effects",tags:["audio"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/406047/G0ZA35-image-75.jpg"},i=void 0,r={id:"tutorials/audio-effects",title:"Audio Effects",description:"Click on the various buttons to try out different sound effects.",source:"@site/docs/tutorials/audio-effects.md",sourceDirName:"tutorials",slug:"/tutorials/audio-effects",permalink:"/tutorials/audio-effects",draft:!1,unlisted:!1,editUrl:"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/tutorials/audio-effects.md",tags:[{label:"audio",permalink:"/tags/audio"}],version:"current",frontMatter:{title:"Audio Effects",tags:["audio"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/406047/G0ZA35-image-75.jpg"},sidebar:"tutorialsSidebar",previous:{title:"Animation without State Graph",permalink:"/tutorials/animation-without-state-graph"},next:{title:"Basic Audio",permalink:"/tutorials/basic-audio"}},c={},l=[{value:"Using The Web Audio API",id:"using-the-web-audio-api",level:2},{value:"The setup",id:"the-setup",level:2},{value:"Using AudioNodes",id:"using-audionodes",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",...(0,n.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"iframe-container",children:(0,o.jsx)("iframe",{loading:"lazy",src:"https://playcanv.as/p/1nS6AnC9/",title:"Audio Effects"})}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.em,{children:"Click on the various buttons to try out different sound effects."})}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsx)(t.p,{children:"This tutorial requires Web Audio API support."})}),"\n",(0,o.jsx)(t.h2,{id:"using-the-web-audio-api",children:"Using The Web Audio API"}),"\n",(0,o.jsx)(t.p,{children:"PlayCanvas allows you to fully leverage the power of the Web Audio API to add powerful effects to your sounds. This tutorial demonstrates how to add various effects to an audio sample."}),"\n",(0,o.jsx)(t.h2,{id:"the-setup",children:"The setup"}),"\n",(0,o.jsxs)(t.p,{children:["You can check out this Scene for yourself ",(0,o.jsx)(t.a,{href:"https://playcanvas.com/editor/scene/440346",children:"here"}),". The Root Entity in this Scene has a ",(0,o.jsx)(t.a,{href:"/user-manual/scenes/components/sound",children:"Sound"})," Component with one slot that plays a simple looping speech audio sample. If you're not familiar with how Sound Components work make sure to check out this ",(0,o.jsx)(t.a,{href:"/tutorials/basic-audio/",children:"Basic Tutorial"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["The Root Entity also has a ",(0,o.jsx)(t.a,{href:"/user-manual/scenes/components/script",children:"Script"})," Component with two scripts. One script is responsible for the user interface and the other is the script we're going to focus on: ",(0,o.jsx)("a",{href:"https://playcanvas.com/editor/asset/4472751",target:"_blank",children:"application.js"}),"."]}),"\n",(0,o.jsx)(t.p,{children:"This script manages the sound effects of the application."}),"\n",(0,o.jsx)(t.h2,{id:"using-audionodes",children:"Using AudioNodes"}),"\n",(0,o.jsxs)(t.p,{children:["The Web Audio API allows you to create various audio nodes which can be connected together to form an audio routing graph. When an audio sample is played it gets processes by each node and eventually reaches the destination usually your speakers. You can find out more details ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API",children:"here"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["In this example we are using a ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/ConvolverNode",children:"Convolver node"}),". In our application script we are creating that node like so:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"this.convolver = this.app.systems.sound.context.createConvolver();\n"})}),"\n",(0,o.jsxs)(t.p,{children:["We then use a bunch of audio samples as impulse responses for the convolver as explained ",(0,o.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/ConvolverNode/buffer",children:"here"}),". Each audio sample is an audio asset and depending on which button you press we use that asset and assign its internal buffer to the convolver buffer like so:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"var asset = this[assetName];\nthis.convolver.buffer = asset.resource.buffer;\n"})}),"\n",(0,o.jsx)(t.p,{children:"We then connect the convolver to our sound slot like so:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"this.entity.sound.slot('speech').setExternalNodes(this.convolver);\n"})}),"\n",(0,o.jsxs)(t.p,{children:["If you click on the button called 'None' we clear all the effects which basically means calling ",(0,o.jsx)(t.code,{children:"clearExternalNodes"})," on the slot:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"this.entity.sound.slot('speech').clearExternalNodes();\n"})}),"\n",(0,o.jsxs)(t.p,{children:["If you have a bigger graph of Audio Nodes and you want to connect it to a slot you need to supply the first node and the last node of the graph in ",(0,o.jsx)(t.code,{children:"setExternalNodes"}),". That way PlayCanvas can correctly connect the last node to the speakers."]}),"\n",(0,o.jsxs)(t.p,{children:["You can find out more about the Sound Component API ",(0,o.jsx)(t.a,{href:"https://api.playcanvas.com/classes/Engine.Sound.html",children:"here"}),"."]})]})}function u(e={}){const{wrapper:t}={...(0,n.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},11151:(e,t,s)=>{s.d(t,{Z:()=>r,a:()=>i});var o=s(67294);const n={},a=o.createContext(n);function i(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);