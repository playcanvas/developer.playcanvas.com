"use strict";(self.webpackChunkdeveloper_playcanvas_com=self.webpackChunkdeveloper_playcanvas_com||[]).push([[680],{92691:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var i=n(74848),a=n(28453);const o={title:"Manipulating Entities",tags:["basics"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/186/KM6GIE-image-75.jpg"},s=void 0,r={id:"tutorials/manipulating-entities",title:"Manipulating Entities",description:"In this tutorial we'll show you how you can change an Entity's position, orientation and scale.",source:"@site/docs/tutorials/manipulating-entities.md",sourceDirName:"tutorials",slug:"/tutorials/manipulating-entities",permalink:"/tutorials/manipulating-entities",draft:!1,unlisted:!1,editUrl:"https://github.com/playcanvas/developer.playcanvas.com/tree/dev/docs/tutorials/manipulating-entities.md",tags:[{label:"basics",permalink:"/tags/basics"}],version:"current",frontMatter:{title:"Manipulating Entities",tags:["basics"],thumb:"https://s3-eu-west-1.amazonaws.com/images.playcanvas.com/projects/12/186/KM6GIE-image-75.jpg"},sidebar:"tutorialsSidebar",previous:{title:"Locking the mouse",permalink:"/tutorials/locking-the-mouse"},next:{title:"Mobile UI Safe Areas",permalink:"/tutorials/mobile-ui-safe-areas"}},l={},c=[{value:"Local and World Co-ordinates",id:"local-and-world-co-ordinates",level:3},{value:"Hierarchy",id:"hierarchy",level:3},{value:"Position",id:"position",level:2},{value:"Moving the entity",id:"moving-the-entity",level:3},{value:"Orientation",id:"orientation",level:2},{value:"Euler Angles",id:"euler-angles",level:3},{value:"Quaternions",id:"quaternions",level:3},{value:"Scale",id:"scale",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"In this tutorial we'll show you how you can change an Entity's position, orientation and scale."}),"\n",(0,i.jsx)(t.p,{children:"Entities form the basis of most applications built using the PlayCanvas framework. An Entity can represent anything from the player character, a bullet, an enemy or just simply be a point in space."}),"\n",(0,i.jsxs)(t.p,{children:["Entities are a special form of graph node, they inherit a lot of their behavior from ",(0,i.jsx)(t.code,{children:"pc.GraphNode"}),". All the manipulations we apply below can also be applied to graph nodes."]}),"\n",(0,i.jsx)(t.p,{children:"One of the most common operations you will need to perform on Entities is to change its transform matrix. The local transform property of the Entity determines the position, orientation and scale of the Entity and affects all child Entities as well. Learning how to manipulate the transform is critical to making interesting and interactive applications."}),"\n",(0,i.jsx)(t.h3,{id:"local-and-world-co-ordinates",children:"Local and World Co-ordinates"}),"\n",(0,i.jsxs)(t.p,{children:["An important part of understanding how to move and manipulate Entities is understanding local and world co-ordinate systems. The world co-ordinate systems is shared by all Entities, it has a fixed origin ",(0,i.jsx)(t.code,{children:"(0,0,0)"})," and a fixed orientation - where ",(0,i.jsx)(t.code,{children:"(0,1,0)"})," is up. The local co-ordinate system relative to the Entity itself. So the local origin is the Entity position, and the orientation follows the orientation of the Entity."]}),"\n",(0,i.jsx)(t.p,{children:"Here is a visual representation of the world-space coordinate system (left) and the local-space coordinate system (right) of an entity:"}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"World and Local Coordinate Systems",src:n(82639).A+"",width:"660",height:"240"})}),"\n",(0,i.jsx)(t.h3,{id:"hierarchy",children:"Hierarchy"}),"\n",(0,i.jsxs)(t.p,{children:["An important part of the Entity system to understand is the Entity Graph or Hierarchy. As Entities are a type of graph node they are collected together in a graph or a hierarchy of parents and children. Each Entity can have a single parent and multiple children. Child Entities inherit transformation information from their parents. An Entity's world transformation matrix is multiplying the local transform by the world transform of the parent Entity. So, for example, if a child Entity has a local translation of ",(0,i.jsx)(t.code,{children:"(1,0,0)"})," and it's parent has a local translation of ",(0,i.jsx)(t.code,{children:"(0,1,0)"}),", the world position of the child will be ",(0,i.jsx)(t.code,{children:"(1,1,0)"})]}),"\n",(0,i.jsx)(t.h2,{id:"position",children:"Position"}),"\n",(0,i.jsx)(t.p,{children:"Getting the position of the entity is straightforward"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"// Get the entity's position relative to the coordinate system of the entity's parent\nvar lp = entity.getLocalPosition();\n\n// Get the entity's position in world space\nvar wp = entity.getPosition();\n"})}),"\n",(0,i.jsxs)(t.p,{children:["These methods both return a ",(0,i.jsx)(t.code,{children:"pc.Vec3"})," (a vector quantity in the array form [x,y,z])."]}),"\n",(0,i.jsx)(t.p,{children:"Setting the position of an entity is just as straightforward."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"// Set the entity's position relative to the coordinate system of the entity's parent\nentity.setLocalPosition(x, y, z);\n\n// Set the entity's position in world space\nentity.setPosition(x, y, z);\n"})}),"\n",(0,i.jsx)(t.h3,{id:"moving-the-entity",children:"Moving the entity"}),"\n",(0,i.jsx)(t.p,{children:"To move the Entity you can add to the Entity's position or you can use the helper functions translate and translateLocal."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"// Translate the entity 1 unit down the positive x axis of world space\nentity.translate(1, 0, 0);\n\n// Translate the entity 1 unit down the entity's local z axis\nentity.translateLocal(0, 0, 1);\n"})}),"\n",(0,i.jsx)(t.h2,{id:"orientation",children:"Orientation"}),"\n",(0,i.jsx)(t.p,{children:"To set an Entity's orientation you can either set an absolute rotation, or apply an incremental rotation."}),"\n",(0,i.jsxs)(t.p,{children:["Setting absolute rotations can be done using either ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Euler_angles",children:"Euler angles"})," or ",(0,i.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Quaternion",children:"quaternions"}),". The Wikipedia explanations of these two mathematical representations of rotation are a little hard to follow but the basics are easy to understand. Here are the important facts:"]}),"\n",(0,i.jsx)(t.h3,{id:"euler-angles",children:"Euler Angles"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Euler angles are three rotations in degrees about the X, Y and Z axes of a coordinate system ",(0,i.jsx)(t.em,{children:"in that order"}),"."]}),"\n",(0,i.jsx)(t.li,{children:"If looking down a coordinate system axis, a positive Euler angle will result in an anti-clockwise rotation around that axis."}),"\n",(0,i.jsx)(t.li,{children:"Euler angles are easy to understand because you can visualize the effect they will have in your head."}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"quaternions",children:"Quaternions"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"Quaternions are stored as 4 numbers and represent any orientation in 3D space."}),"\n",(0,i.jsx)(t.li,{children:"They are difficult to set directly, but can be set from Euler angles, rotation matrices or an axis-angle representation."}),"\n",(0,i.jsx)(t.li,{children:"Although they are hard to visualize, they are useful since they are robust and can be quickly interpolated (when animating rotation)."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"When scripting entities, it is more likely that you will set an Entity's rotation using Euler angles. For example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"// Rotate 30 degrees anticlockwise around the x axis of the parent entity's coordinate\n// system and then 45 degrees around its y axis and lastly 60 degrees around its z axis\nentity.setLocalEulerAngles(30, 45, 60);\n\n// Rotate 30 degrees anticlockwise around the world space x axis and then 45 degrees\n// around the world space y axis and lastly 60 degrees around the world space z axis\nentity.setEulerAngles(30, 45, 60);\n"})}),"\n",(0,i.jsx)(t.p,{children:"However, if you do want to set an Entity's rotation in quaternion form, you can use the following functions:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"// Create an identity rotation\nvar q = new pc.Quat();\n// Set the entity to have the same rotation as its parent - equivalent to\n// entity.setLocalEulerAngles(0, 0, 0)\nentity.setLocalRotation(q);\n\n// Set the entity to have no rotation with respect to the world space coordinate\n// system  - equivalent to entity.setEulerAngles(0, 0, 0)\nentity.setRotation(q);\n"})}),"\n",(0,i.jsx)(t.p,{children:"To rotate an Entity incrementally, you can use rotate to rotate the Entity with respect to world space axes or rotateLocal to rotate with respect to the Entity's current axes."}),"\n",(0,i.jsx)(t.p,{children:"For example, to rotate an Entity by 180 degrees around the world up axis:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"entity.rotate(0, 180, 0);\n"})}),"\n",(0,i.jsx)(t.p,{children:"Or to rotate the Entity 90 degrees around its local x axis do:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"entity.rotateLocal(90, 0, 0);\n"})}),"\n",(0,i.jsx)(t.h2,{id:"scale",children:"Scale"}),"\n",(0,i.jsx)(t.p,{children:"To scale an Entity you simply need to call the following function:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"// Scale the entity by a factor of 2 in the local Y axis\nentity.setLocalScale(1, 2, 1);\n"})}),"\n",(0,i.jsx)(t.p,{children:"And here is a slightly more interesting example:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-javascript",children:"// Scale the entity using a sine function over time\nthis.timer += deltaTime;\nvar s = Math.sin(this.timer) + 1;\nentity.setLocalScale(s, s, s);\n"})}),"\n",(0,i.jsx)(t.p,{children:"Note that you cannot currently set the Entity's scale in world space."})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},82639:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/world-and-local-f87e363021449a109f324d4efdd58429.png"},28453:(e,t,n)=>{n.d(t,{R:()=>s,x:()=>r});var i=n(96540);const a={},o=i.createContext(a);function s(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);